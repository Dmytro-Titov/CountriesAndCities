CREATE TABLE IF NOT EXISTS countries
(
    id      BIGINT GENERATED BY DEFAULT AS IDENTITY,
    name    VARCHAR(100) NOT NULL,
    version BIGINT,

    CONSTRAINT pk_countries PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS cities
(
    id         BIGINT GENERATED BY DEFAULT AS IDENTITY,
    name       VARCHAR(100)  NOT NULL,
    logo_key   varchar(2048) NOT NULL,
    country_id BIGINT        NOT NULL,
    version    BIGINT,

    CONSTRAINT pk_cities PRIMARY KEY (id)
);

ALTER TABLE cities
    DROP CONSTRAINT IF EXISTS FK_CITIES_COUNTRY_ID;
ALTER TABLE cities
    ADD CONSTRAINT FK_CITIES_COUNTRY_ID FOREIGN KEY (country_id) REFERENCES countries (id)
